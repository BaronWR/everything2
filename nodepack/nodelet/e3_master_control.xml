<node>
  <nltext></nltext>
  <parent_container>175986</parent_container>
  <nlgoto>0</nlgoto>
  <lastupdate>1258662771</lastupdate>
  <node_id>1988841</node_id>
  <type_nodetype>9</type_nodetype>
  <nlcode>[%

# originally, this nodelet was a fake nodelet force inserted by 'showNodelets';
# it was broken out into a normal nodelet (still force inserted, but by
# 'nodelet meta-container') so it acts normally, and is logically contained
# -- N-Wing  Thursday, December 2, 2004

# while 'nodelet meta-container' *should* only call this if user is at
# least an editor, it does not hurt to do another security check,
# especially since this may show sensitive information
my $UID = $$USER{user_id};
my $isAdmin = exists $HTMLVARS{'group_gods'}{$UID};
my $isCE = $isAdmin || exists $HTMLVARS{'group_content editors'}{$UID};
unless( $isCE ) {
return 'Uh-oh. You shouldn\'t be able to see this message. This means somebody else made a mistake somewhere.';
}

my $str = '';

if ($isAdmin) {
	$str .= htmlcode('admin searchform');
	#$str.= htmlcode('adminbar');	#N-Wing TODO maybe make an option, for those who like old way
}

# Lord Brawl testing code to give SIGTITLErs e2node retitle power
if (getId($USER) == 744507) {
  $str.= htmlcode('sigtitlebar') if $isCE;
} 
my $nt = $$NODE{type}{title};



if(exists ($HTMLVARS{'group_content editors'}{$UID}) ) {
#admins have this link in the toolset already
	my $SIGTITLE_id = 1433518; # hard-coded node_id
	if (htmlcode('isinUsergroup',$$USER{node_id}.','.$SIGTITLE_id)){
		if ($nt eq 'writeup') {
			$str.=' &lt;a href=&quot;/index.pl?node_id=1138488&amp;old_writeup_id='.getId($NODE).'&quot;&gt;Reparent Writeup &lt;/a&gt;';
		} elsif ($nt eq 'e2node'){
			$str.=' &lt;a href=&quot;/index.pl?node_id=1138488&amp;old_e2node_id='.getId($NODE).'&quot;&gt;Reparent Writeups &lt;/a&gt;';
		}
	}
}

$str .= htmlcode('nodenote') if $isCE;


	$str .= htmlcode('admin toolset');



#$str.='&lt;div&gt;'.$str.'&lt;/div&gt;';

$str;
%]

</nlcode>
  <title>e3 Master Control</title>
</node>
