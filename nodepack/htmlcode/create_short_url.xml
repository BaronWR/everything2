<node>
  <core>0</core>
  <reputation>0</reputation>
  <lockedby_user>0</lockedby_user>
  <createtime>2010-07-28 22:30:41</createtime>
  <locktime>0000-00-00 00:00:00</locktime>
  <totalvotes>0</totalvotes>
  <hits>0</hits>
  <node_id>1990063</node_id>
  <htmlcode_id>1990063</htmlcode_id>
  <checks_arguments>0</checks_arguments>
  <code>use POSIX;

my ($urlNode) = @_;
my $targetId = getId $urlNode;

my @encodeChars = qw/
 a   c d e f   h     k   m n o     r s t u   w x   z
 A B C D E F G H   J K L M N   P Q R   T U V W X Y Z
   2 3 4     7 8 9 
 /
 ;
# Exclude because of similarity: I l 1
# Exclude because of similarity: O 0
# Exclude because of similarity: i j
# Exclude because of similarity: v y
# Exclude because of similarity: g p q
# Exclude because of similarity: b 6
# Exclude because of similarity: S 5

my $encodeInt = sub {

  my $encodeMe = shift;
  my $encodeResult = '';

  while ($encodeMe != 0) {
    my $nextCharValue = $encodeMe % $#encodeChars;
    my $nextChar = $encodeChars[$nextCharValue];
    $encodeResult = $nextChar . $encodeResult;
    $encodeMe /= $#encodeChars;
    $encodeMe = floor($encodeMe);
  }
  $encodeResult = '0' if $encodeResult eq '';
  return $encodeResult;

};

my $shortString = &amp;$encodeInt($targetId);
my $shortLink =
  'http://'
  . $CONFIG{canonical_web_server}
  . '/s/'
  . $shortString
  ;

return $shortLink;
</code>
  <type_nodetype>4</type_nodetype>
  <author_user>1449265</author_user>
  <package>0</package>
  <title>create short url</title>
</node>
