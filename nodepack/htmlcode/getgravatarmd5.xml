<node>
  <core>0</core>
  <reputation>0</reputation>
  <lockedby_user>0</lockedby_user>
  <createtime>2011-07-13 06:12:21</createtime>
  <locktime>0000-00-00 00:00:00</locktime>
  <totalvotes>0</totalvotes>
  <hits>0</hits>
  <node_id>1992202</node_id>
  <htmlcode_id>1992202</htmlcode_id>
  <checks_arguments>0</checks_arguments>
  <code>use Digest::MD5('md5_hex');

my $gravatarUser = shift;
getRef $gravatarUser;

my $defaultEmail = &quot;$$gravatarUser{title}\@chat.everything2.com&quot;;
my $email =
	$DB-&gt;sqlSelect(
		&quot;setting_value&quot;
		, &quot;uservars&quot;
		, &quot;user_id = $$gravatarUser{user_id}&quot;
		. &quot; AND setting_name = 'gravatar_email'&quot;
  );

$email = $defaultEmail unless defined $email;
$email = lc $email;
$email =~ s/^\s+|\s+$//g;

return md5_hex($email);
</code>
  <type_nodetype>4</type_nodetype>
  <author_user>1449265</author_user>
  <package>0</package>
  <title>getGravatarMD5</title>
</node>
