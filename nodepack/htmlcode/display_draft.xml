<node>
  <core>0</core>
  <reputation>0</reputation>
  <lockedby_user>0</lockedby_user>
  <createtime>2011-02-02 17:34:20</createtime>
  <locktime>0000-00-00 00:00:00</locktime>
  <totalvotes>0</totalvotes>
  <hits>0</hits>
  <node_id>1991181</node_id>
  <htmlcode_id>1991181</htmlcode_id>
  <checks_arguments>0</checks_arguments>
  <code>my $displaytype = shift;
$displaytype ||= $query -&gt; param('displaytype') || 'display';

my $displaylike;

my $tinopener = (isGod($USER) and $query -&gt; param('tinopener') and !htmlcode('canseedraft', $NODE));
local ($$NODE{doctext}, $$NODE{collaborators})
	= (&quot;&lt;p&gt;&lt;b&gt;&amp;#91;DOCTEXT REDACTED&amp;#93;&lt;/b&gt;&lt;/p&gt;
		&lt;p&gt;You do not have permission to see this draft.&lt;/p&gt;&quot; , $$USER{title}) if $tinopener;

if ($$NODE{author_user} == $$USER{node_id}
		|| htmlcode('canseedraft', $NODE)
		|| $$NODE{type}{title} eq 'writeup'){
	$displaylike = getType(
		getNodeWhere({pagetype_nodetype =&gt; 117, displaytype =&gt; $displaytype}, 'htmlpage') ?
			'writeup' : 'document');
}else{
	$NODE = $GNODE = getNodeById($HTMLVARS{not_found});
	$displaylike = getType($$NODE{type_nodetype});
}

my $PAGE = getPageForType($displaylike, $displaytype);
return parseCode($PAGE -&gt; {page}, $NODE);
</code>
  <type_nodetype>4</type_nodetype>
  <author_user>1828141</author_user>
  <package>0</package>
  <title>display draft</title>
</node>
