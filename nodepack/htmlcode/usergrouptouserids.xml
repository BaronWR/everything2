<node>
  <core>0</core>
  <reputation>0</reputation>
  <lockedby_user>0</lockedby_user>
  <createtime>2009-03-31 04:17:23</createtime>
  <locktime>0000-00-00 00:00:00</locktime>
  <totalvotes>0</totalvotes>
  <hits>0</hits>
  <node_id>1980272</node_id>
  <htmlcode_id>1980272</htmlcode_id>
  <checks_arguments>0</checks_arguments>
  <code>#Given a ug_id or a ug hash, convert it to a comma-separated string of user IDs
my ($ug) = @_;

#Given a ug_id or a ug hashref, convert it recursively to an array of user IDs
local *explode_ug = sub{
  my ($ug) = @_;
  $ug = getNodeById($ug) if $ug =~ /^\d+$/;

  my @ids = @{$$ug{'group'}};

  my @result;
  foreach my $id(@ids){
    if(getNodeById($id) -&gt; {'type'} -&gt; {'title'} eq 'user'){
      push @result, $id;
    }
    else{
      push @result, explode_ug($id);
    }
  }

  return @result;
};

my @uids = explode_ug($ug);

my $out = &quot;@uids&quot;;

$out =~ s/ /,/g;

return $out;</code>
  <type_nodetype>4</type_nodetype>
  <author_user>1394568</author_user>
  <package>0</package>
  <title>usergroupToUserIds</title>
</node>
