<node>
  <core>0</core>
  <reputation>0</reputation>
  <lockedby_user>0</lockedby_user>
  <createtime>2009-06-18 23:10:48</createtime>
  <locktime>0000-00-00 00:00:00</locktime>
  <totalvotes>0</totalvotes>
  <hits>0</hits>
  <node_id>1988250</node_id>
  <htmlcode_id>1988250</htmlcode_id>
  <checks_arguments>0</checks_arguments>
  <code>#This should only be called from patch display page --[Swap]
my ($patch_id) = @_;

$patch_id ||= $NODE -&gt; {node_id};

my $PATCH = getNodeById($patch_id);

my $assigned_to = $PATCH -&gt; {assigned_to};

#Process changes, if any
if(isGod($USER) ){
  my $new_assign = $query -&gt; param('assigned_to');
  if( $new_assign and $new_assign != $assigned_to ){
    $PATCH -&gt; {assigned_to} = $new_assign;
    updateNode($PATCH,-1);
  }
}


my @splat_ids = @{ getNode('%%','usergroup')-&gt;{group} };

my %dropdown_labels;

foreach my $splat_id(@splat_ids){
  my $splat_title = getNodeById($splat_id) -&gt; {title};
  $splat_title .= &quot; *&quot; if $splat_id == $assigned_to;
  $dropdown_labels{$splat_id} = $splat_title;
}
$dropdown_labels{0} = &quot;Nobody&quot;;
$dropdown_labels{0} .= &quot; *&quot; unless $assigned_to;
push @splat_ids,0;

my $str;

$str .= $query -&gt; popup_menu(&quot;assigned_to&quot;, \@splat_ids,
                             $assigned_to,
                             \%dropdown_labels);

return $str;

</code>
  <type_nodetype>4</type_nodetype>
  <author_user>1394568</author_user>
  <package>0</package>
  <title>assign_patch</title>
</node>
