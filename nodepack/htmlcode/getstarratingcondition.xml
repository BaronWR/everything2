<node>
  <createtime>2009-12-14 18:11:19</createtime>
  <totalvotes>0</totalvotes>
  <node_id>1989048</node_id>
  <htmlcode_id>1989048</htmlcode_id>
  <code># Returns the condition for the current user for the current test (star ratings)
# This condition is intended to be consistent for an individual's use of the site
#  over the course of the test.
#  - as such every user from the same IP should ideally have the same condition
#  - we can't do this if two users who already have been assigned conditions
#     sign on from the same machine

# Until we actually assign conditions, we're going to do a dummy version of this

my $user_id = $$USER{user_id};
my $username = lc($$USER{title});

my %fixedConditionHash = (
  'swap' =&gt; 2
  , 'oldminer' =&gt; 1
  , 'jostling elders' =&gt; 1
  , 'nate' =&gt; 2
  , 'oolong' =&gt; 12
);

my $condition = $fixedConditionHash{$username};

if (!(defined $condition)) {
   $condition = 1 + (ord(substr($username, 0, 3)) % 5);
}

return $condition;
</code>
  <type_nodetype>4</type_nodetype>
  <author_user>1449265</author_user>
  <title>getStarRatingCondition</title>
</node>
