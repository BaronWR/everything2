<node>
  <createtime>2011-06-30 01:07:22</createtime>
  <totalvotes>0</totalvotes>
  <node_id>1992148</node_id>
  <code>my ($searchTerm) = @_;
# recover escaped commas from input
$searchTerm =~ s/\|COMMA\|/,/g;
$searchTerm =~ s/\|COMMACOMMA\|/|COMMA|/g;
$searchTerm = $DB-&gt;quote($searchTerm . '%');

my ($userType, $usergroupType) =
  map { getId(getType($_)) } ( 'user', 'usergroup');

my $names_cursor =
  $DB-&gt;sqlSelectMany(
    &quot;title&quot;
    , &quot;node&quot;
    , &quot;(type_nodetype = $userType OR type_nodetype = $usergroupType)&quot;
      . &quot; AND title LIKE ${searchTerm}&quot;
    , &quot;LIMIT 10&quot;
  );

my @possible_names = ();

while(my $name = $names_cursor-&gt;fetchrow)
{
  push @possible_names, $name;
}

my @completions =
  map
    { { label =&gt; $_, value =&gt; $_, id =&gt; $_ }; }
    @possible_names
    ;

return \@completions;

</code>
  <type_nodetype>4</type_nodetype>
  <title>user searcher</title>
</node>
