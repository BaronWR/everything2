<node>
  <core>0</core>
  <reputation>0</reputation>
  <lockedby_user>0</lockedby_user>
  <createtime>2006-08-05 12:38:25</createtime>
  <locktime>0000-00-00 00:00:00</locktime>
  <totalvotes>0</totalvotes>
  <hits>0</hits>
  <node_id>1824306</node_id>
  <htmlcode_id>1824306</htmlcode_id>
  <checks_arguments>0</checks_arguments>
  <code>my ($sql) = join(',', @_);
my $res = $dbh-&gt;prepare('explain ' . $sql);
$res-&gt;execute() or return 'Oops ' . $sql;

my $str = '&lt;table style=&quot;width: 100%&quot;&gt;&lt;tr&gt;&lt;th&gt;table&lt;/th&gt;&lt;th&gt;type&lt;/th&gt;&lt;th&gt;possible_keys&lt;/th&gt;&lt;th&gt;key&lt;/th&gt;&lt;th&gt;key_len&lt;/th&gt;&lt;th&gt;ref&lt;/th&gt;&lt;th&gt;rows&lt;/th&gt;&lt;th&gt;Extra&lt;/th&gt;&lt;/tr&gt;';

my $row = 1;
while (my $r = $res-&gt;fetchrow_hashref) {
   $str .= sprintf('&lt;tr class=&quot;%s&quot;&gt;&lt;td&gt;%s&lt;/td&gt;&lt;td&gt;%s&lt;/td&gt;&lt;td&gt;%s&lt;/td&gt;&lt;td&gt;%s&lt;/td&gt;&lt;td&gt;%s&lt;/td&gt;&lt;td&gt;%s&lt;/td&gt;&lt;td&gt;%s&lt;/td&gt;&lt;td&gt;%s&lt;/td&gt;&lt;/tr&gt;',
                  $row ? 'oddrow' : 'evenrow',
                  $$r{table},
                  $$r{type},
                  $$r{possible_keys},
                  $$r{key},
                  $$r{key_len},
                  $$r{ref},
                  $$r{rows},
                  $$r{Extra}
                  );
   $row = !$row;
}

$str .= '&lt;/table&gt;';
$str;</code>
  <type_nodetype>4</type_nodetype>
  <author_user>974148</author_user>
  <package>0</package>
  <title>explainsql</title>
</node>
