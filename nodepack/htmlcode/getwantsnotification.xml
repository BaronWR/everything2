<node>
  <createtime>2011-10-25 01:03:59</createtime>
  <totalvotes>0</totalvotes>
  <node_id>1992694</node_id>
  <code>use JSON;

my ($notifyUser, $notifyName) = @_;

getRef $notifyUser;
return 0 unless $notifyUser &amp;&amp; $$notifyUser{type}{title} eq 'user';

my $notification = getNode($notifyName, &quot;notification&quot;);
return 0 unless $notification;
my $notificationId = $$notification{node_id};

my $notifyVars = getVars($notifyUser);
my $notifySettings = $$notifyVars{settings};

if ($notifySettings) {
  my $jsonHash = from_json($notifySettings);
  my $notificationPrefs = $$jsonHash{notifications};
  return 1 if $notificationPrefs &amp;&amp; $$notificationPrefs{$notificationId};
}

return 0;
</code>
  <type_nodetype>4</type_nodetype>
  <title>getWantsNotification</title>
</node>
