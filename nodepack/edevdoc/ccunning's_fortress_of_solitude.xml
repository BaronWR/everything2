<node>
  <doctext>&lt;i&gt;sssssh, i'm meditating&lt;/i&gt;
&lt;br&gt;&lt;hr&gt;&lt;br&gt;
A basic implementation of a history nodelet, kid tested, mom approved.
&lt;p&gt;
&lt;pre&gt;
&amp;#91;%
return '' if getId($USER) == $HTMLVARS{guest_user};

my $limit = 10;
my $current = '&amp;lt;a href=&quot;/index.pl?node_id=' . $$NODE{node_id} . '&quot;&amp;gt;' . $$NODE{title} . '&amp;lt;/a&amp;gt;';

my @links = split(/&amp;lt;br&amp;gt;/, $$VARS{history});
my $add = 1;

foreach (@links) {
     if ($_ eq $current) {
          $add = 0;
     }
}

if ($add == 1) {
    unshift @links, $current;
    if (@links &amp;gt; $limit) {
        pop @links;
    }
}

$$VARS{history} = join('&amp;lt;br&amp;gt;', @links);
%&amp;#93;
&lt;/pre&gt;
&lt;p&gt;
&lt;hr&gt;
&lt;p&gt;
Ignore me...
&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
can't you read? i said ignore me.
&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
seriously, what is your problem?
&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
fine, whatever.
&lt;p&gt;
&lt;small&gt;&lt;small&gt;&lt;small&gt;
[weekend on the beach]&lt;br&gt;
[shortest terror story ever written]&lt;br&gt;
[Bluebottle (person)]&lt;br&gt;
[get your rocks off]&lt;br&gt;
[susan woodley]&lt;br&gt;
[Dr. Snuggles]&lt;br&gt;
[zh]&lt;br&gt;
[fartalot]&lt;br&gt;
[sid-pie]&lt;br&gt;
[The Velveeta Rabbit]&lt;br&gt;
&lt;/small&gt;&lt;/small&gt;&lt;/small&gt;</doctext>
  <core>0</core>
  <reputation>0</reputation>
  <lockedby_user>0</lockedby_user>
  <createtime>2001-09-15 01:29:57</createtime>
  <locktime>0000-00-00 00:00:00</locktime>
  <totalvotes>0</totalvotes>
  <hits>0</hits>
  <node_id>1158815</node_id>
  <edittime>0000-00-00 00:00:00</edittime>
  <type_nodetype>854232</type_nodetype>
  <document_id>1158815</document_id>
  <author_user>5174</author_user>
  <package>0</package>
  <title>ccunning's fortress of solitude</title>
</node>
