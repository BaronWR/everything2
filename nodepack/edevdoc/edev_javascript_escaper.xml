<node>
  <doctext>&lt;script&gt;&lt;!--

function element (id) {
    var r = document.getElementById(id);
    if (!r) {
        alert(&quot;Can't get element '&quot; + id + &quot;'&quot;);
        return null;
    } else {
        return r;
    }
}

function formEncode (resultId, dataId) {
    var result = element (resultId);
    var data = element (dataId);
    if (result == null || data == null) return;
    
    result.value = &quot;&lt;script&gt;&lt;!--\n&quot;
    + &quot;document.write(unescape(\&quot;&quot; + escape(data.value) + &quot;\&quot;));&quot;
    + &quot;\n// -&quot;+&quot;-&gt;&lt;/sc&quot;+&quot;ript&gt;&quot;;
}

function formPreview (dataId) {
    var data = element(dataId);
    if (!data) return;
    var w = window.open();
    w.document.write(data.value);
    w.document.write(&quot;&lt;br /&gt;&quot;);
    w.document.close();
}

function formDecode(resultId, dataId) {
    var result = element(resultId);
    var data = element(dataId);
    if (data == null || result == null) return;

    var text = data.value
        .replace(/^(.|\n)*\(&quot;/g, '')
        .replace(/&quot;(.|\n)*$/g, '');
    result.value = unescape(text);
}

// --&gt;&lt;/script&gt;

&lt;form&gt;
Okay, here's how it works. You dump your HTML, maybe including some code or what-have you, with all its square brackets and whatever, in here:&lt;br /&gt;

&lt;textarea id=&quot;input&quot; rows=&quot;12&quot; cols=&quot;60&quot;&gt;&lt;/textarea&gt;&lt;br /&gt;

...then press this button:
&lt;input type=&quot;button&quot; onClick=&quot;formEncode('output', 'input');&quot; value=&quot;encode&quot;&gt;&lt;br /&gt;

...and the script to generate it all comes out here: &lt;br /&gt;
&lt;textarea id=&quot;output&quot; rows=&quot;6&quot; cols=&quot;60&quot;&gt;&lt;/textarea&gt;&lt;br /&gt;

If you want to see what it looks like before saving it, press this one:
&lt;input type=&quot;button&quot; onClick=&quot;formPreview('output');&quot; value=&quot;preview&quot;&gt;&lt;br /&gt;

or if you want to get back the original code from the script, press this one:
&lt;input type=&quot;button&quot; onClick=&quot;formDecode('input', 'output');&quot; value=&quot;decode&quot;&gt;
&lt;/form&gt;

&lt;hr&gt;

&lt;p&gt;
Tested on Safari, IE5 and Netscape 7. It seems to work. So, you know, that's cool.
&lt;/p&gt;</doctext>
  <createtime>2003-09-09 03:43:49</createtime>
  <totalvotes>0</totalvotes>
  <node_id>1490538</node_id>
  <edittime>0000-00-00 00:00:00</edittime>
  <type_nodetype>854232</type_nodetype>
  <document_id>1490538</document_id>
  <author_user>5603</author_user>
  <title>edev JavaScript escaper</title>
</node>
