<node>
  <doctext>&lt;table width=100% cellpadding=0 cellspacing=10 border=0&gt;&lt;tr&gt;&lt;td valign=top&gt;
&lt;script language=&quot;javascript&quot;&gt;
var re1 = new RegExp(&quot;&amp;&quot;, &quot;g&quot;);
var re2 = new RegExp(&quot;&lt;&quot;, &quot;g&quot;);
var re3 = new RegExp(&quot;&gt;&quot;, &quot;g&quot;);
var re4 = new RegExp(&quot;\\&quot; + String.fromCharCode(91), &quot;g&quot;);
var re5 = new RegExp(&quot;\\&quot; + String.fromCharCode(93), &quot;g&quot;);
var re6 = new RegExp(&quot;\t&quot;, &quot;g&quot;);

re1.compile; re2.compile; re3.compile; re4.compile; re5.compile; re6.compile;

function fix_brackets(textval) {
var form_input = textval;
    form_input = form_input.replace(/&lt;pre&gt;/g, &quot;__PADDING__STRING__&lt;pre&gt;&quot;);

var lines = new Array;
    lines = form_input.split(&quot;&lt;pre&gt;&quot;);

var pre = &quot;no&quot;;
for(i=0; i &lt; lines.length; i++) {
    if(pre == &quot;no&quot;) {
        var temp = lines.shift();
        pre = &quot;yes&quot;;
        lines.push(temp);
    } else {
        var pre_line = lines.shift();

        var pre_array = new Array;
            pre_array = pre_line.split(&quot;&lt;/pre&gt;&quot;);

        var left = pre_array.shift();
            left = left.replace(re1, &quot;&amp;amp;&quot;);
            left = left.replace(re2, &quot;&amp;lt;&quot;);
            left = left.replace(re3, &quot;&amp;gt;&quot;);
            left = left.replace(re4, &quot;&amp;#91;&quot;);
            left = left.replace(re5, &quot;&amp;#93;&quot;);
            left = left.replace(re6, &quot;    &quot;);
        var right = pre_array.shift();

        var temp = left + &quot;&lt;/pre&gt;&quot; + right;
        lines.push(temp);
    }
}

var form_output = lines.join(&quot;&lt;pre&gt;&quot;);
    form_output = form_output.replace(/__PADDING__STRING__/g, &quot;&quot;);

document.codefixer.edit.value = form_output;
}
&lt;/script&gt;
Put some source code here (currently only in &amp;lt;pre&amp;gt;&amp;lt;/pre&amp;gt; pairs), then hit &quot;Reformat.&quot;
&lt;form name=&quot;codefixer&quot;&gt;
    &lt;textarea name=&quot;edit&quot; cols=&quot;80&quot; rows=&quot;20&quot;&gt;&lt;/textarea&gt;

    &lt;br&gt;

    &lt;input type=&quot;button&quot; name=&quot;submit&quot; value=&quot;Reformat&quot; 
        OnClick=&quot;fix_brackets( document.codefixer.edit.value)&quot; /&gt;
    &lt;input type=&quot;button&quot; name=&quot;clear&quot; value=&quot;Clear&quot; 
        OnClick=&quot;javascript:document.codefixer.edit.value='';&quot; /&gt;
&lt;/form&gt;

&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

</doctext>
  <core>0</core>
  <reputation>0</reputation>
  <lockedby_user>0</lockedby_user>
  <createtime>2005-03-15 02:11:50</createtime>
  <locktime>0000-00-00 00:00:00</locktime>
  <totalvotes>0</totalvotes>
  <hits>0</hits>
  <node_id>1707371</node_id>
  <edittime>0000-00-00 00:00:00</edittime>
  <type_nodetype>854232</type_nodetype>
  <document_id>1707371</document_id>
  <author_user>1458096</author_user>
  <package>0</package>
  <title>jclast's improved source code formatter</title>
</node>
