<node>
  <core>0</core>
  <reputation>0</reputation>
  <lockedby_user>0</lockedby_user>
  <createtime>2000-03-07 21:27:03</createtime>
  <locktime>0000-00-00 00:00:00</locktime>
  <totalvotes>0</totalvotes>
  <hits>17</hits>
  <node_id>444704</node_id>
  <htmlcode_id>444704</htmlcode_id>
  <checks_arguments>0</checks_arguments>
  <code>return unless isGod($USER);
my $U = $query-&gt;param('bless_id');
$U = getNode($query-&gt;param(&quot;node&quot;), 'user') if ($query-&gt;param('node'));
getRef $U;

return unless $$U{type}{title} eq 'user';

my $gp = int($query-&gt;param('experience'));
$gp ||= 10;

$$U{karma} += 1;
adjustGP($U, $gp);

my $bless = getNode(&quot;bless&quot;,&quot;opcode&quot;);
$DB-&gt;sqlInsert('seclog', {'seclog_user' =&gt; $$USER{node_id}, 'seclog_node' =&gt; $$bless{node_id}, 'seclog_details' =&gt; &quot;$$U{title} was blessed 10GP by $$USER{title}&quot;});

my $from =  &quot;!&quot;;
htmlcode('sendPrivateMessage'
	, {
		'author_id' =&gt; getId(getNode('Cool Man Eddie', 'user')),
		'recipient_id' =&gt; $$U{user_id},
		'message' =&gt; &quot;Whoa, you&amp;rsquo;ve just been [bless|blessed]$from&quot;
	}
);

updateNode($U, -1);
htmlcode('achievementsByType', 'karma', $$U{user_id});
</code>
  <type_nodetype>415056</type_nodetype>
  <author_user>114</author_user>
  <package>0</package>
  <title>bless</title>
</node>
