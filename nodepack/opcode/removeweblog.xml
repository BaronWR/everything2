<node>
  <core>0</core>
  <reputation>0</reputation>
  <lockedby_user>0</lockedby_user>
  <createtime>2000-04-06 19:08:46</createtime>
  <locktime>0000-00-00 00:00:00</locktime>
  <totalvotes>0</totalvotes>
  <hits>0</hits>
  <node_id>485617</node_id>
  <htmlcode_id>485617</htmlcode_id>
  <checks_arguments>0</checks_arguments>
  <code># This removes one item from a weblog
my $src = int($query-&gt;param(&quot;source&quot;));
my $to_node = int($query-&gt;param(&quot;to_node&quot;));

# usergroup owner
my $isOwner = 0;
$isOwner = 1 if ($$USER{node_id} == getVars(getNode('usergroup owners','setting'))-&gt;{$src});
my $canRemove = isGod($USER) || $isOwner || $DB -&gt; sqlSelect( &quot;weblog_id&quot; , &quot;weblog&quot; ,
		&quot;weblog_id=$src and to_node=$to_node and linkedby_user=$$USER{ user_id }&quot; );

return unless $canRemove;
return unless $src &amp;&amp; $to_node ;
$DB-&gt;getDatabaseHandle()-&gt;do(&quot;update weblog set removedby_user=$$USER{ user_id } where weblog_id=$src &amp;&amp; to_node=$to_node&quot;);

htmlcode('update New Writeups data') if $src == 855769; # evil magic number for Node Row: this won't be needed for long</code>
  <type_nodetype>415056</type_nodetype>
  <author_user>315</author_user>
  <package>0</package>
  <title>removeweblog</title>
</node>
